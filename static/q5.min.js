function Q5(a){"use strict";return new b(a);function b(e){let $="global"==e?window:this;$.canvas=document.createElement("canvas");let l=$.canvas.getContext("2d");$.width=100,$.height=100,$.canvas.width=$.width,$.canvas.height=$.height,"offscreen"!=e&&(document.body?document.body.appendChild($.canvas):window.addEventListener("load",function(){document.getElementById("boids-display").appendChild($.canvas)})),x(),$.MAGIC=161533525,$.RGB=0,$.HSV=1,$.HSB=1,$.CHORD=0,$.PIE=1,$.OPEN=2,$.RADIUS=1,$.CORNER=2,$.CORNERS=3,$.ROUND="round",$.SQUARE="butt",$.PROJECT="square",$.MITER="miter",$.BEVEL="bevel",$.CLOSE=1,$.BLEND="source-over",$.REMOVE="destination-out",$.ADD="lighter",$.DARKEST="darken",$.LIGHTEST="lighten",$.DIFFERENCE="difference",$.SUBTRACT="subtract",$.EXCLUSION="exclusion",$.MULTIPLY="multiply",$.SCREEN="screen",$.REPLACE="copy",$.OVERLAY="overlay",$.HARD_LIGHT="hard-light",$.SOFT_LIGHT="soft-light",$.DODGE="color-dodge",$.BURN="color-burn",$.NORMAL="normal",$.ITALIC="italic",$.BOLD="bold",$.BOLDITALIC="italic bold",$.CENTER="center",$.LEFT="left",$.RIGHT="right",$.TOP="top",$.BOTTOM="bottom",$.BASELINE="alphabetic",$.LANDSCAPE="landscape",$.PORTRAIT="portrait",$.ALT=18,$.BACKSPACE=8,$.CONTROL=17,$.DELETE=46,$.DOWN_ARROW=40,$.ENTER=13,$.ESCAPE=27,$.LEFT_ARROW=37,$.OPTION=18,$.RETURN=13,$.RIGHT_ARROW=39,$.SHIFT=16,$.TAB=9,$.UP_ARROW=38,$.HALF_PI=Math.PI/2,$.PI=Math.PI,$.QUARTER_PI=Math.PI/4,$.TAU=2*Math.PI,$.TWO_PI=2*Math.PI,$.THRESHOLD=1,$.GRAY=2,$.OPAQUE=3,$.INVERT=4,$.POSTERIZE=5,$.DILATE=6,$.ERODE=7,$.BLUR=8,$.ARROW="default",$.CROSS="crosshair",$.HAND="pointer",$.MOVE="move",$.TEXT="text",$.VIDEO={video:!0,audio:!1},$.AUDIO={video:!1,audio:!0},$.SHR3=1,$.LCG=2,$.HARDWARE_FILTERS=!0,$.hint=function(a,b){$[a]=b},$.frameCount=0,$.mouseX=0,$.mouseY=0,$.pmouseX=0,$.pmouseY=0,$.mouseButton=null,$.keyIsPressed=!1,$.mouseIsPressed=!1,$.key=null,$.keyCode=null,$.pixels=null,$.accelerationX=0,$.accelerationY=0,$.accelerationZ=0,$.rotationX=0,$.rotationY=0,$.rotationZ=0,$.relRotationX=0,$.relRotationY=0,$.relRotationZ=0,$.pAccelerationX=0,$.pAccelerationY=0,$.pAccelerationZ=0,$.pRotationX=0,$.pRotationY=0,$.pRotationZ=0,$.pRelRotationX=0,$.pRelRotationY=0,$.pRelRotationZ=0,$.touches=[],$._colorMode=$.RGB,$._noStroke=!1,$._noFill=!1,$._ellipseMode=$.CENTER,$._rectMode=$.CORNER,$._curveDetail=20,$._curveAlpha=0,$._noLoop=!1,$._textFont="sans-serif",$._textSize=12,$._textLeading=12,$._textStyle="normal",$._pixelDensity=1,$._frameRate=null,$._tint=null;let m=null,n=!0,o=[],p=null,q=0,r={},s=0,t=null,u=null,v=null;for(let f of(Object.defineProperty($,"deviceOrientation",{get:function(){return 90==Math.abs(window.orientation)?$.LANDSCAPE:$.PORTRAIT}}),Object.defineProperty($,"windowWidth",{get:function(){return window.innerWidth}}),Object.defineProperty($,"windowHeight",{get:function(){return window.innerHeight}}),Object.defineProperty($,"drawingContext",{get:function(){return l}}),$.createCanvas=function(a,b){$.width=a,$.height=b,$.canvas.width=a,$.canvas.height=b,x()},$.resizeCanvas=function(a,b){$.width=a,$.height=b,$.canvas.width=a,$.canvas.height=b},$.createGraphics=$.createImage=function(c,d){let a=new b("offscreen");return a.createCanvas(c,d),a.noLoop(),a},$.pixelDensity=function(a){return void 0==a||($._pixelDensity=a,$.canvas.width=Math.ceil($.width*a),$.canvas.height=Math.ceil($.height*a),$.canvas.style.width=$.width+"px",$.canvas.style.height=$.height+"px",l.scale($._pixelDensity,$._pixelDensity),x()),$._pixelDensity},$.map=function(e,d,f,a,b,g){let c=a+(b-a)*((e-d)*1/(f-d));return g?a<b?Math.min(Math.max(c,a),b):Math.min(Math.max(c,b),a):c},$.lerp=function(b,c,a){return b*(1-a)+c*a},$.constrain=function(a,b,c){return Math.min(Math.max(a,b),c)},$.dist=function(){return 4==arguments.length?Math.hypot(arguments[0]-arguments[2],arguments[1]-arguments[3]):Math.hypot(arguments[0]-arguments[3],arguments[1]-arguments[4],arguments[2]-arguments[5])},$.norm=function(a,b,c){return $.map(a,b,c,0,1)},$.sq=function(a){return a*a},$.fract=function(a){return a-Math.floor(a)},$.degrees=function(a){return 180*a/Math.PI},$.radians=function(a){return a*Math.PI/180},$.abs=Math.abs,$.ceil=Math.ceil,$.exp=Math.exp,$.floor=Math.floor,$.log=Math.log,$.mag=Math.hypot,$.max=Math.max,$.min=Math.min,$.round=Math.round,$.sqrt=Math.sqrt,$.sin=Math.sin,$.cos=Math.cos,$.tan=Math.tan,$.asin=Math.asin,$.acos=Math.acos,$.atan=Math.atan,$.atan2=Math.atan2,$.Vector=function(b,c,d){let a=this;a.x=b||0,a.y=c||0,a.z=d||0;let e=null,f=null;function g(a,b,c){return void 0!=a.x?a:void 0!=b?{x:a,y:b,z:c||0}:{x:a,y:a,z:a}}function h(){null==f&&(e=Math.sqrt(f=a.x*a.x+a.y*a.y+a.z*a.z))}function i(){f=null,e=null}a.set=function(b,c,d){a.x=b||0,a.y=c||0,a.z=d||0},a.copy=function(){return new $.Vector(a.x,a.y,a.z)},a.add=function(){let b=g.apply(null,arguments);return a.x+=b.x,a.y+=b.y,a.z+=b.z,i(),a},a.rem=function(){let b=g.apply(null,arguments);return a.x%=b.x,a.y%=b.y,a.z%=b.z,i(),a},a.sub=function(){let b=g.apply(null,arguments);return a.x-=b.x,a.y-=b.y,a.z-=b.z,i(),a},a.mult=function(){let b=g.apply(null,arguments);return a.x*=b.x,a.y*=b.y,a.z*=b.z,i(),a},a.div=function(){let b=g.apply(null,arguments);return a.x/=b.x,a.y/=b.y,a.z/=b.z,i(),a},a.mag=function(){return h(),e},a.magSq=function(){return h(),f},a.dot=function(){let b=g.apply(null,arguments);return a.x*b.x+a.y*b.y+a.z*b.z},a.dist=function(){let b=g.apply(null,arguments),c=a.x-b.x,d=a.y-b.y,e=a.z-b.z;return Math.sqrt(c*c+d*d+e*e)},a.cross=function(){let b=g.apply(null,arguments),c=a.y*b.z-a.z*b.y,d=a.z*b.x-a.x*b.z,e=a.x*b.y-a.y*b.x;return a.x=c,a.y=d,a.z=e,i(),a},a.normalize=function(){h();let b=e;return a.x/=b,a.y/=b,a.z/=b,e=1,f=1,a},a.limit=function(b){h();let d=e;if(d>b){let c=b/d;a.x*=c,a.y*=c,a.z*=c,e=b,f=b*b}return a},a.setMag=function(b){h();let c=b/e;return a.x*=c,a.y*=c,a.z*=c,e=b,f=b*b,a},a.heading=function(){return Math.atan2(a.y,a.x)},a.rotate=function(b){let c=Math.cos(b),d=Math.sin(b),e=a.x*c-a.y*d,f=a.x*d+a.y*c;return a.x=e,a.y=f,a},a.angleBetween=function(){let b=g.apply(null,arguments),d=a.dot(b)/(a.mag()*b.mag()),c;return c=Math.acos(Math.min(1,Math.max(-1,d))),c*=Math.sign(a.cross(b).z||1)},a.lerp=function(c,b){return a.x=a.x*(1-b)+c.x*b,a.y=a.y*(1-b)+c.y*b,a.z=a.z*(1-b)+c.z*b,i(),a},a.reflect=function(b){return b.normalize(),a.sub(b.mult(2*a.dot(b)))},a.array=function(){return[a.x,a.y,a.z]},a.equals=function(c,b){return void 0==b&& void 0==(b=Number.EPSILON)&&(b=0),Math.abs(c.x-a.x)<b&&Math.abs(c.y-a.y)<b&&Math.abs(c.z-a.z)<b},a.fromAngle=function(c,b){return void 0==b&&(b=1),e=b,f=b*b,a.x=b*Math.cos(c),a.y=b*Math.sin(c),a.z=0,a},a.fromAngles=function(c,d,b){void 0==b&&(b=1),e=b,f=b*b;let g=Math.sin(c);return a.x=b*g*Math.sin(d),a.y=-b*Math.cos(c),a.z=b*g*Math.cos(d),a},a.random2D=function(){return e=1,f=1,a.fromAngle(Math.random()*Math.PI*2)},a.random3D=function(){return e=1,f=1,a.fromAngles(Math.random()*Math.PI*2,Math.random()*Math.PI*2)},a.toString=function(){return`[${a.x}, ${a.y}, ${a.z}]`}},$.Vector.add=function(a,b){return new $.Vector(a.x+b.x,a.y+b.y,a.z+b.z)},$.Vector.rem=function(a,b){return new $.Vector(a.x%b.x,a.y%b.y,a.z%b.z)},$.Vector.sub=function(a,b){return new $.Vector(a.x-b.x,a.y-b.y,a.z-b.z)},$.Vector.mult=function(b,a){return void 0==a.x?new $.Vector(b.x*a,b.y*a,b.z*a):new $.Vector(b.x*a.x,b.y*a.y,b.z*a.z)},$.Vector.div=function(b,a){return void 0==a.x?new $.Vector(b.x/a,b.y/a,b.z/a):new $.Vector(b.x/a.x,b.y/a.y,b.z/a.z)},$.Vector.dist=function(a,b){return Math.hypot(a.x-b.x,a.y-b.y,a.z-b.z)},$.Vector.cross=function(a,b){return new $.Vector(a.y*b.z-a.z*b.y,a.z*b.x-a.x*b.z,a.x*b.y-a.y*b.x)},$.Vector.lerp=function(b,c,a){return new $.Vector(b.x*(1-a)+c.x*a,b.y=b.y*(1-a)+c.y*a,b.z=b.z*(1-a)+c.z*a)},$.Vector.equals=function(a,b,c){return a.equals(b,c)},["fromAngle","fromAngles","random2D","random3D"]))$.Vector[f]=function(a,b,c){return new $.Vector()[f](a,b,c)};function w(l,g,a){let b,c,d,f,j,k,e,h,i;if(0==g)return b=a,c=a,d=a,[255*b,255*c,255*d];switch((f=l)>360&&(f=0),f/=60,j=~~f,k=f-j,e=a*(1-g),h=a*(1-g*k),i=a*(1-g*(1-k)),j){case 0:b=a,c=i,d=e;break;case 1:b=h,c=a,d=e;break;case 2:b=e,c=a,d=i;break;case 3:b=e,c=h,d=a;break;case 4:b=i,c=e,d=a;break;default:b=a,c=e,d=h}return[255*b,255*c,255*d]}function x(){l.fillStyle="white",l.strokeStyle="black",l.lineCap="round",l.lineJoin="miter"}function y(a){if(0<=a&&a<2*Math.PI)return a;for(;a<0;)a+=2*Math.PI;for(;a>=Math.PI;)a-=2*Math.PI;return a}function z(b,c,g,h,i,j,d,e){if($._noFill&&$._noStroke)return;let k=y(i),m=y(j);l.beginPath();for(let a=0;a<e+1;a++){let n=a/e,f=$.lerp(k,m,n),o=Math.cos(f)*g/2,p=Math.sin(f)*h/2;l[a?"lineTo":"moveTo"](b+o,c+p)}d==$.CHORD?l.closePath():d==$.PIE&&(l.lineTo(b,c),l.closePath()),$._noFill||l.fill(),$._noStroke||l.stroke()}function A(a,b,c,d){$._noFill&&$._noStroke||(l.beginPath(),l.ellipse(a,b,c/2,d/2,0,0,2*Math.PI),$._noFill||l.fill(),$._noStroke||l.stroke())}function B(a,b,d,e,c,f,h,i){if($._noFill&&$._noStroke)return;if(void 0==c){var j,k,m,n;return j=a,k=b,m=d,n=e,void($._noFill||l.fillRect(j,k,m,n),$._noStroke||l.strokeRect(j,k,m,n))}if(void 0==f)return B(a,b,d,e,c,c,c,c);let g=Math.min(Math.abs(e),Math.abs(d))/2;c=Math.min(g,c),f=Math.min(g,f),i=Math.min(g,i),h=Math.min(g,h),l.beginPath(),l.moveTo(a+c,b),l.arcTo(a+d,b,a+d,b+e,f),l.arcTo(a+d,b+e,a,b+e,h),l.arcTo(a,b+e,a,b,i),l.arcTo(a,b,a+d,b,c),l.closePath(),$._noFill||l.fill(),$._noStroke||l.stroke()}function C(){o=[]}$.createVector=function(a,b,c){return new $.Vector(a,b,c)},$.curvePoint=function(d,e,f,g,a){let b=a*a*a,c=a*a;return d*(-0.5*b+c-.5*a)+e*(1.5*b-2.5*c+1)+f*(-1.5*b+2*c+.5*a)+g*(.5*b-.5*c)},$.bezierPoint=function(c,d,e,f,a){let b=1-a;return Math.pow(b,3)*c+3*Math.pow(b,2)*a*d+3*b*Math.pow(a,2)*e+Math.pow(a,3)*f},$.curveTangent=function(c,d,e,f,a){let b=a*a;return c*(-3*b/2+2*a-.5)+d*(9*b/2-5*a)+e*(-9*b/2+4*a+.5)+f*(3*b/2-a)},$.bezierTangent=function(e,c,d,f,a){let b=1-a;return 3*f*Math.pow(a,2)-3*d*Math.pow(a,2)+6*d*b*a-6*c*b*a+3*c*Math.pow(b,2)-3*e*Math.pow(b,2)},$.Color=function(b,c,d,e){let a=this;a.MAGIC=786698,a._r=b,a._g=c,a._b=d,a._a=e,a._h=0,a._s=0,a._v=0,a._hsvInferred=!1,a.setRed=function(b){a._r=b,a._hsvInferred=!1},a.setGreen=function(b){a._g=b,a._hsvInferred=!1},a.setBlue=function(b){a._b=b,a._hsvInferred=!1},a.setAlpha=function(b){a._a=b/255,a._hsvInferred=!1},a._inferHSV=function(){if(!a._hsvInferred){var c,d,b;let f,e,h,g;[a._h,a._s,a._v]=(c=a._r,d=a._g,b=a._b,(f=c<d?c<b?c:b:d<b?d:b,e=c>d?c>b?c:b:d>b?d:b,g=100*e/255,0==g)?[0,h=0,g]:0==(h=100*(e-f)/e)?[0,h,g]:[e==c?0+60*(d-b)/(e-f):e==d?120+60*(b-c)/(e-f):240+60*(c-d)/(e-f),h,g]),a._hsvInferred=!0}},a.toString=function(){return`rgba(${Math.round(a._r)},${Math.round(a._g)},${Math.round(a._b)},${~~(1e3*a._a)/1e3})`}},$.colorMode=function(a){$._colorMode=a},$.color=function(){if(1==arguments.length&&786698==arguments[0].MAGIC)return arguments[0];if($._colorMode==$.RGB){if(1==arguments.length)return new $.Color(arguments[0],arguments[0],arguments[0],1);if(2==arguments.length)return new $.Color(arguments[0],arguments[0],arguments[0],arguments[1]/255);if(3==arguments.length)return new $.Color(arguments[0],arguments[1],arguments[2],1);if(4==arguments.length)return new $.Color(arguments[0],arguments[1],arguments[2],arguments[3]/255)}else{if(1==arguments.length)return new $.Color(...w(0,0,arguments[0]/100),1);if(2==arguments.length)return new $.Color(...w(0,0,arguments[0]/100),arguments[1]/255);if(3==arguments.length)return new $.Color(...w(arguments[0],arguments[1]/100,arguments[2]/100),1);if(4==arguments.length)return new $.Color(...w(arguments[0],arguments[1]/100,arguments[2]/100),arguments[3])}return null},$.red=function(a){return a._r},$.green=function(a){return a._g},$.blue=function(a){return a._b},$.alpha=function(a){return 255*a._a},$.hue=function(a){return a._inferHSV(),a._h},$.saturation=function(a){return a._inferHSV(),a._s},$.brightness=function(a){return a._inferHSV(),a._v},$.lightness=function(a){return(.2126*a._r+.7152*a._g+.0722*a._b)*100/255},$.lerpColor=function(a,b,c){var d,e,f,g;return $._colorMode==$.RGB?new $.Color($.constrain($.lerp(a._r,b._r,c),0,255),$.constrain($.lerp(a._g,b._g,c),0,255),$.constrain($.lerp(a._b,b._b,c),0,255),$.constrain($.lerp(a._a,b._a,c),0,1)):(a._inferHSV(),b._inferHSV(),new $.Color($.constrain((d=a._h,e=b._h,f=c,(g=[[Math.abs(e-d),$.map(f,0,1,d,e)],[Math.abs(e+360-d),$.map(f,0,1,d,e+360)],[Math.abs(e-360-d),$.map(f,0,1,d,e-360)]]).sort((a,b)=>a[0]-b[0]),(g[0][1]+720)%360),0,360),$.constrain($.lerp(a._s,b._s,c),0,100),$.constrain($.lerp(a._v,b._v,c),0,100),$.constrain($.lerp(a._a,b._a,c),0,1)))},$.strokeWeight=function(a){$._noStroke=!1,l.lineWidth=a},$.stroke=function(){if($._noStroke=!1,"string"==typeof arguments[0]){l.strokeStyle=arguments[0];return}let a=$.color.apply(null,arguments);if(a._a<=0){$._noStroke=!0;return}l.strokeStyle=a},$.noStroke=function(){$._noStroke=!0},$.fill=function(){if($._noFill=!1,"string"==typeof arguments[0]){l.fillStyle=arguments[0];return}let a=$.color.apply(null,arguments);if(a._a<=0){$._noFill=!0;return}l.fillStyle=a},$.noFill=function(){$._noFill=!0},$.blendMode=function(a){l.globalCompositeOperation=a},$.strokeCap=function(a){l.lineCap=a},$.strokeJoin=function(a){l.lineJoin=a},$.ellipseMode=function(a){$._ellipseMode=a},$.rectMode=function(a){$._rectMode=a},$.curveDetail=function(a){$._curveDetail=a},$.curveAlpha=function(a){$._curveAlpha=a},$.curveTightness=function(a){console.warn("curveTightness() sets the 'alpha' parameter of Catmull-Rom curve, and is NOT identical to p5.js counterpart. As this might change in the future, please call curveAlpha() directly."),$._curveAlpha=a},$.clear=function(){l.clearRect(0,0,$.width,$.height)},$.background=function(){if(arguments[0]&&arguments[0].MAGIC==$.MAGIC)return $.image(arguments[0],0,0,$.width,$.height);l.save(),l.resetTransform(),l.scale($._pixelDensity,$._pixelDensity),"string"==typeof arguments[0]?l.fillStyle=arguments[0]:l.fillStyle=$.color(...Array.from(arguments)),l.fillRect(0,0,$.width,$.height),l.restore()},$.line=function(a,b,c,d){$._noStroke||(l.beginPath(),l.moveTo(a,b),l.lineTo(c,d),l.stroke())},$.arc=function(c,d,a,b,g,h,e,f){if(g==h)return $.ellipse(c,d,a,b);void 0==f&&(f=25),void 0==e&&(e=$.PIE),$._ellipseMode==$.CENTER?z(c,d,a,b,g,h,e,f):$._ellipseMode==$.RADIUS?z(c,d,2*a,2*b,g,h,e,f):$._ellipseMode==$.CORNER?z(c+a/2,d+b/2,a,b,g,h,e,f):$._ellipseMode==$.CORNERS&&z((c+a)/2,(d+b)/2,a-c,b-d,g,h,e,f)},$.ellipse=function(c,d,b,a){void 0==a&&(a=b),$._ellipseMode==$.CENTER?A(c,d,b,a):$._ellipseMode==$.RADIUS?A(c,d,2*b,2*a):$._ellipseMode==$.CORNER?A(c+b/2,d+a/2,b,a):$._ellipseMode==$.CORNERS&&A((c+b)/2,(d+a)/2,b-c,a-d)},$.circle=function(b,c,a){return $.ellipse(b,c,a,a)},$.point=function(a,b){a.x&&(b=a.y,a=a.x),l.beginPath(),l.ellipse(a,b,.4,.4,0,0,2*Math.PI),l.stroke()},$.rect=function(c,d,a,b,e,f,g,h){$._rectMode==$.CENTER?B(c-a/2,d-b/2,a,b,e,f,g,h):$._rectMode==$.RADIUS?B(c-a,d-b,2*a,2*b,e,f,g,h):$._rectMode==$.CORNER?B(c,d,a,b,e,f,g,h):$._rectMode==$.CORNERS&&B(c,d,a-c,b-d,e,f,g,h)},$.square=function(b,c,a,d,e,f,g){return $.rect(b,c,a,a,d,e,f,g)},$.beginShape=function(){C(),l.beginPath(),n=!0},$.beginContour=function(){l.closePath(),C(),n=!0},$.endContour=function(){C(),n=!0},$.vertex=function(a,b){C(),n?l.moveTo(a,b):l.lineTo(a,b),n=!1},$.bezierVertex=function(a,b,c,d,e,f){C(),l.bezierCurveTo(a,b,c,d,e,f)},$.quadraticVertex=function(a,b,c,d){C(),l.quadraticCurveTo(a,b,c,d)},$.bezier=function(a,b,c,d,e,f,g,h){$.beginShape(),$.vertex(a,b),$.bezierVertex(c,d,e,f,g,h),$.endShape()},$.triangle=function(a,b,c,d,e,f){$.beginShape(),$.vertex(a,b),$.vertex(c,d),$.vertex(e,f),$.endShape($.CLOSE)},$.quad=function(a,b,c,d,e,f,g,h){$.beginShape(),$.vertex(a,b),$.vertex(c,d),$.vertex(e,f),$.vertex(g,h),$.endShape($.CLOSE)},$.endShape=function(a){C(),a&&l.closePath(),$._noFill||l.fill(),$._noStroke||l.stroke(),$._noFill&&$._noStroke&&(l.save(),l.fillStyle="none",l.fill(),l.restore())},$.curveVertex=function(c,d){if(o.push([c,d]),o.length<4)return;let e=o[o.length-4],f=o[o.length-3],g=o[o.length-2],h=o[o.length-1],b=function(n,o,g,h,i,j,p,q,r,k){function l(a,b,c,d,e,f){return Math.pow(Math.pow(d-b,2)+Math.pow(e-c,2),.5*f)+a}let s=[],b=l(0,n,o,g,h,k),c=l(b,g,h,i,j,k),f=l(c,i,j,p,q,k);for(let m=0;m<r;m++){let e=b+m/(r-1)*(c-b),a=[(b-e)/(b-0),(e-0)/(b-0),(c-e)/(c-b),(e-b)/(c-b),(f-e)/(f-c),(e-c)/(f-c),(c-e)/(c-0),(e-0)/(c-0),(f-e)/(f-b),(e-b)/(f-b)];for(let d=0;d<a.length;d+=2)isNaN(a[d])&&(a[d]=1,a[d+1]=0),isFinite(a[d])||(a[d]>0?(a[d]=1,a[d+1]=0):(a[d]=0,a[d+1]=1));let v=n*a[0]+g*a[1],w=o*a[0]+h*a[1],t=g*a[2]+i*a[3],u=h*a[2]+j*a[3],x=i*a[4]+p*a[5],y=j*a[4]+q*a[5],z=v*a[6]+t*a[7],A=w*a[6]+u*a[7],B=t*a[8]+x*a[9],C=u*a[8]+y*a[9],D=z*a[2]+B*a[3],E=A*a[2]+C*a[3];s.push([D,E])}return s}(...e,...f,...g,...h,$._curveDetail,$._curveAlpha);for(let a=0;a<b.length;a++)n?l.moveTo(...b[a]):l.lineTo(...b[a]),n=!1},$.curve=function(a,b,c,d,e,f,g,h){$.beginShape(),$.curveVertex(a,b),$.curveVertex(c,d),$.curveVertex(e,f),$.curveVertex(g,h),$.endShape()},$.translate=function(a,b){l.translate(a,b)},$.rotate=function(a){l.rotate(a)},$.scale=function(b,a){void 0==a&&(a=b),l.scale(b,a)},$.applyMatrix=function(a,b,c,d,e,f){l.transform(a,b,c,d,e,f)},$.shearX=function(a){l.transform(1,0,Math.tan(a),1,0,0)},$.shearY=function(a){l.transform(1,Math.tan(a),0,1,0,0)},$.resetMatrix=function(){l.resetTransform(),l.scale($._pixelDensity,$._pixelDensity)},$.pushMatrix=$.push=function(){l.save()},$.popMatrix=$.pop=function(){l.restore()},$.image=function(a,c,d,e,i,j,k,f,g){let b=a.MAGIC==$.MAGIC?a.canvas:a;function h(){if(a.MAGIC!=$.MAGIC||!$._tint)return;let b=a.canvas.getContext("2d");b.save(),b.resetTransform(),b.clearRect(0,0,b.canvas.width,b.canvas.height),b.drawImage(u.canvas,0,0),b.restore()}if(a.MAGIC==$.MAGIC&&null!=$._tint&&(E(a.canvas.width,a.canvas.height),u.drawImage(a.canvas,0,0),a.tinted($._tint)),!e){a.MAGIC==$.MAGIC||a.width?l.drawImage(b,c,d,a.width,a.height):l.drawImage(b,c,d,a.videoWidth,a.videoHeight),h();return}if(!j){l.drawImage(b,c,d,e,i),h();return}f||(f=b.width),g||(g=b.height),l.drawImage(b,j,k,f,g,c,d,e,i),h()},$.loadPixels=function(){p=l.getImageData(0,0,$.canvas.width,$.canvas.height),$.pixels=p.data},$.updatePixels=function(){null!=p&&l.putImageData(p,0,0)},$.loadImage=function(c,d){q++;let b=$.createGraphics(100,100),e=b.canvas.getContext("2d"),a=new Image;return a.src=c,a.crossOrigin="Anonymous",a.onload=function(){e.canvas.width=a.width,e.canvas.height=a.height,b.width=a.width,b.height=a.height,e.drawImage(a,0,0),q--,d&&d(b)},b};let a={};function D(a,b){null==t&&(t=document.createElement("canvas").getContext("2d")),void 0==a&&(a=l.canvas.width,b=l.canvas.height),(t.canvas.width!=a||t.canvas.height!=b)&&(t.canvas.width=a,t.canvas.height=b)}function E(a,b){null==u&&(u=document.createElement("canvas").getContext("2d")),void 0==a&&(a=l.canvas.width,b=l.canvas.height),(u.canvas.width!=a||u.canvas.height!=b)&&(u.canvas.width=a,u.canvas.height=b)}function F(){let a=l.canvas.width*l.canvas.height*4;(null==v||a!=v.length)&&(v=new Uint8ClampedArray(a))}function G(a){t.clearRect(0,0,t.canvas.width,t.canvas.height),t.filter=a,t.drawImage(l.canvas,0,0),l.save(),l.resetTransform(),l.clearRect(0,0,l.canvas.width,l.canvas.height),l.drawImage(t.canvas,0,0),l.restore()}a[$.THRESHOLD]=function(b,c){void 0==c?c=127.5:c*=255;for(let a=0;a<b.length;a+=4){let d=.2126*b[a]+.7152*b[a+1]+.0722*b[a+2];b[a]=b[a+1]=b[a+2]=d>=c?255:0}},a[$.GRAY]=function(b){for(let a=0;a<b.length;a+=4){let c=.2126*b[a]+.7152*b[a+1]+.0722*b[a+2];b[a]=b[a+1]=b[a+2]=c}},a[$.OPAQUE]=function(b){for(let a=0;a<b.length;a+=4)b[a+3]=255},a[$.INVERT]=function(b){for(let a=0;a<b.length;a+=4)b[a]=255-b[a],b[a+1]=255-b[a+1],b[a+2]=255-b[a+2]},a[$.POSTERIZE]=function(b,c){let d=c-1;for(let a=0;a<b.length;a+=4)b[a]=(b[a]*c>>8)*255/d,b[a+1]=(b[a+1]*c>>8)*255/d,b[a+2]=(b[a+2]*c>>8)*255/d},a[$.DILATE]=function(g){F(),v.set(g);let[b,h]=[l.canvas.width,l.canvas.height];for(let c=0;c<h;c++)for(let d=0;d<b;d++){let j=4*Math.max(d-1,0),k=4*Math.min(d+1,b-1),m=4*Math.max(c-1,0)*b,n=4*Math.min(c+1,h-1)*b,i=4*c*b,e=4*d;for(let a=0;a<4;a++){let o=a+m,p=a+n,f=a+i;g[i+e+a]=Math.max(v[o+e],v[f+j],v[f+e],v[f+k],v[p+e])}}},a[$.ERODE]=function(g){F(),v.set(g);let[b,h]=[l.canvas.width,l.canvas.height];for(let c=0;c<h;c++)for(let d=0;d<b;d++){let j=4*Math.max(d-1,0),k=4*Math.min(d+1,b-1),m=4*Math.max(c-1,0)*b,n=4*Math.min(c+1,h-1)*b,i=4*c*b,e=4*d;for(let a=0;a<4;a++){let o=a+m,p=a+n,f=a+i;g[i+e+a]=Math.min(v[o+e],v[f+j],v[f+e],v[f+k],v[p+e])}}},a[$.BLUR]=function(a,f){f=Math.floor((f=f||1)*$._pixelDensity),F(),v.set(a);let p=2*f+1,b=function(b){let d=new Float32Array(b),c=.3*f+.8,g=c*c*2;for(let a=0;a<b;a++){let e=a-b/2,h=Math.exp(-(e*e)/g)/(2.5066282746*c);d[a]=h}return d}(p),[c,q]=[l.canvas.width,l.canvas.height];for(let g=0;g<q;g++)for(let h=0;h<c;h++){let r=0,s=0,t=0,u=0;for(let d=0;d<p;d++){let A=Math.min(Math.max(h-f+d,0),c-1),i=4*(g*c+A);r+=v[i]*b[d],s+=v[i+1]*b[d],t+=v[i+2]*b[d],u+=v[i+3]*b[d]}let j=4*(g*c+h);a[j]=r,a[j+1]=s,a[j+2]=t,a[j+3]=u}v.set(a);for(let k=0;k<q;k++)for(let m=0;m<c;m++){let w=0,x=0,y=0,z=0;for(let e=0;e<p;e++){let n=4*(Math.min(Math.max(k-f+e,0),q-1)*c+m);w+=v[n]*b[e],x+=v[n+1]*b[e],y+=v[n+2]*b[e],z+=v[n+3]*b[e]}let o=4*(k*c+m);a[o]=w,a[o+1]=x,a[o+2]=y,a[o+3]=z}},$.filter=function(c,b){if($.HARDWARE_FILTERS&& void 0!=l.filter)if(D(),c==$.THRESHOLD){void 0==b&&(b=.5),b=Math.max(b,1e-5);let f=Math.floor(.5/b*100);G(`saturate(0%) brightness(${f}%) contrast(1000000%)`)}else if(c==$.GRAY)G("saturate(0%)");else if(c==$.OPAQUE)t.fillStyle="black",t.fillRect(0,0,t.canvas.width,t.canvas.height),t.drawImage(l.canvas,0,0),l.save(),l.resetTransform(),l.drawImage(t.canvas,0,0),l.restore();else if(c==$.INVERT)G("invert(100%)");else if(c==$.BLUR)G(`blur(${Math.ceil(b*$._pixelDensity/1)||1}px)`);else{let d=l.getImageData(0,0,l.canvas.width,l.canvas.height);a[c](d.data,b),l.putImageData(d,0,0)}else{let e=l.getImageData(0,0,l.canvas.width,l.canvas.height);a[c](e.data,b),l.putImageData(e,0,0)}},$.resize=function(a,b){D(),t.drawImage(l.canvas,0,0),$.width=a,$.height=b,l.canvas.width=a*$._pixelDensity,l.canvas.height=b*$._pixelDensity,l.save(),l.resetTransform(),l.clearRect(0,0,l.canvas.width,l.canvas.height),l.drawImage(t.canvas,0,0,l.canvas.width,l.canvas.height),l.restore()},$.get=function(a,c,b,d){if(void 0!=a&& void 0==b){let e=l.getImageData(a,c,1,1).data;return new $.Color(e[0],e[1],e[2],e[3]/255)}a=a||0,c=c||0,b=b||$.width,d=d||$.height;let f=$.createGraphics(b,d);f.pixelDensity($._pixelDensity);let g=l.getImageData(a*$._pixelDensity,c*$._pixelDensity,b*$._pixelDensity,d*$._pixelDensity);return f.canvas.getContext("2d").putImageData(g,0,0),f},$.set=function(c,d,a){if(a.MAGIC==$.MAGIC){let e=$._tint;$._tint=null,$.image(a,c,d),$._tint=e;return}let b=4*(d*$._pixelDensity*l.canvas.width+c*$._pixelDensity);$.pixels[b]=a._r,$.pixels[b+1]=a._g,$.pixels[b+2]=a._b,$.pixels[b+3]=255*a._a},$.tinted=function(){let a=$.color(...Array.from(arguments)),b=a._a;a._a=1,D(),t.clearRect(0,0,t.canvas.width,t.canvas.height),t.fillStyle=a,t.fillRect(0,0,t.canvas.width,t.canvas.height),t.globalCompositeOperation="multiply",t.drawImage(l.canvas,0,0),t.globalCompositeOperation="source-over",l.save(),l.resetTransform();let c=l.globalCompositeOperation;l.globalCompositeOperation="source-in",l.drawImage(t.canvas,0,0),l.globalCompositeOperation=c,l.restore(),t.globalAlpha=b,t.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawImage(l.canvas,0,0),t.globalAlpha=1,l.save(),l.resetTransform(),l.clearRect(0,0,l.canvas.width,l.canvas.height),l.drawImage(t.canvas,0,0),l.restore()},$.tint=function(){$._tint=$.color(...Array.from(arguments))},$.noTint=function(){$._tint=null},$.mask=function(a){l.save(),l.resetTransform();let b=l.globalCompositeOperation;l.globalCompositeOperation="destination-in",l.drawImage(a.canvas,0,0),l.globalCompositeOperation=b,l.restore()},$.clearTemporaryBuffers=function(){t=null,u=null,v=null},$.save=function(b,c){b=b||"untitled",c=c||"png";var a=document.createElement("a");a.innerHTML="[Download]",a.addEventListener("click",function(){this.href=l.canvas.toDataURL(),this.download=b+"."+c},!1),document.body.appendChild(a),a.click(),document.body.removeChild(a)},$.saveCanvas=function(a,b,e){if(a.MAGIC==$.MAGIC){e&&a.save(b,e);let c=b.split(".");return a.save(c.slice(0,-1).join("."),c[c.length-1])}if(b)return $.save(a,b);let d=a.split(".");return $.save(d.slice(0,-1).join("."),d[d.length-1])},$.loadFont=function(a,f){let b=a.split("/"),c=b[b.length-1].split(".")[0].replace(" ",""),e=`@font-face {
          font-family: '${c}';
          src: url('${a}');
        }`,d=document.createElement("style");return d.textContent=e,document.head.append(d),c},$.textFont=function(a){$._textFont=a},$.textSize=function(a){$._textSize=a,$._textLeading=a},$.textLeading=function(a){$._textLeading=a},$.textStyle=function(a){$._textStyle=a},$.textAlign=function(b,a){l.textAlign=b,a&&(l.textBaseline=a==$.CENTER?"middle":a)},$.text=function(a,e,c,f){if(!a||(a=a.toString(),$._noFill&&$._noStroke))return;l.font=`${$._textStyle} ${$._textSize}px ${$._textFont}`;let d=a.split("\n");for(let b=0;b<d.length;b++)$._noFill||l.fillText(d[b],e,c,f),$._noStroke||l.strokeText(d[b],e,c,f),c+=$._textLeading},$.textWidth=function(a){return l.font=`${$._textStyle} ${$._textSize}px ${$._textFont}`,l.measureText(a).width},$.textAscent=function(a){return l.font=`${$._textStyle} ${$._textSize}px ${$._textFont}`,l.measureText(a).actualBoundingBoxAscent},$.textDescent=function(a){return l.font=`${$._textStyle} ${$._textSize}px ${$._textFont}`,l.measureText(a).actualBoundingBoxDescent};var H,g=4,I=1<<g,h=8,J=1<<h,K=4,L=.5,M=function(a){return .5*(1-Math.cos(a*Math.PI))};$.noise=function(f,d,e){if(d=d||0,e=e||0,null==H){H=new Array(4096);for(var i,q,c,a,j,r=0;r<4096;r++)H[r]=Math.random()}f<0&&(f=-f),d<0&&(d=-d),e<0&&(e=-e);for(var k=Math.floor(f),l=Math.floor(d),m=Math.floor(e),n=f-k,o=d-l,p=e-m,s=0,t=.5,u=0;u<K;u++){var b=k+(l<<g)+(m<<h);i=M(n),q=M(o),c=H[4095&b],c+=i*(H[b+1&4095]-c),a=H[b+I&4095],a+=i*(H[b+I+1&4095]-a),c+=q*(a-c),b+=J,a=H[4095&b],a+=i*(H[b+1&4095]-a),j=H[b+I&4095],j+=i*(H[b+I+1&4095]-j),a+=q*(j-a),c+=M(p)*(a-c),s+=c*t,t*=L,k<<=1,n*=2,l<<=1,o*=2,m<<=1,p*=2,n>=1&&(k++,n--),o>=1&&(l++,o--),p>=1&&(m++,p--)}return s},$.noiseDetail=function(a,b){a>0&&(K=a),b>0&&(L=b)};let N=function(){let a,b;return{setSeed(c){b=a=(null==c?4294967296*Math.random():c)>>>0},getSeed:()=>a,rand:()=>(b=(1664525*b+1013904223)%4294967296)/4294967296}},i=function(){let a,b;return{setSeed(c){a=b=(null==c?4294967295*Math.random():c)>>>0},getSeed:()=>b,rand:()=>(a^=a<<17,a^=a>>13,((a^=a<<5)>>>0)/4294967295)}},j=i();j.setSeed(),$.noiseSeed=function(c){let a=void 0==c?4294967295*Math.random():c;H||(H=new Float32Array(4096));for(var b=0;b<4096;b++)a^=a<<17,a^=a>>13,a^=a<<5,H[b]=(a>>>0)/4294967295},$.randomSeed=function(a){j.setSeed(a)},$.random=function(a,b){return void 0==a?j.rand():"number"!=typeof a?a[~~(a.length*j.rand())]:void 0!=b?j.rand()*(b-a)+a:j.rand()*a},$.randomGenerator=function(a){a==$.LCG?j=N():a==$.SHR3&&(j=i()),j.setSeed()};var k=new function(){var c,d,e,f=new Array(128),g=new Array(256),h=new Array(128),i=new Array(128),k=new Array(256),l=new Array(256),a=function(){return 4294967296*j.rand()-2147483648},b=function(){return .5+(a()<<0)*2328306e-16},m=function(){for(var d,g,j,k;;){if(d=e*h[c],0==c){do j=b(),k=b(),d=-(.2904764*Math.log(j)),g=-Math.log(k);while(g+g<d*d)return e>0?3.44262+d:-3.44262-d}if(i[c]+b()*(i[c-1]-i[c])<Math.exp(-0.5*d*d))return d;if(c=127&(e=a()),Math.abs(e)<f[c])return e*h[c]}},n=function(){for(var e;;){if(0==c)return 7.69711-Math.log(b());if(e=d*k[c],l[c]+b()*(l[c-1]-l[c])<Math.exp(-e))return e;if(c=255&(d=a()),d<g[c])return d*k[c]}};this.SHR3=a,this.UNI=b,this.RNOR=function(){return c=127&(e=a()),Math.abs(e)<f[c]?e*h[c]:m()},this.REXP=function(){return c=255&(d=a()>>>0),d<f[c]?d*k[c]:n()},this.zigset=function(){var d,b,a=3.442619855899,e=a,c=7.697117470131487,j=c;for(b=126,d=.00991256303526217/Math.exp(-0.5*a*a),f[0]=Math.floor(a/d*2147483648),f[1]=0,h[0]=d/2147483648,h[127]=a/2147483648,i[0]=1,i[127]=Math.exp(-0.5*a*a);b>=1;b--)a=Math.sqrt(-2*Math.log(.00991256303526217/a+Math.exp(-0.5*a*a))),f[b+1]=Math.floor(a/e*2147483648),e=a,i[b]=Math.exp(-0.5*a*a),h[b]=a/2147483648;for(b=254,d=.003949659822581572/Math.exp(-c),g[0]=Math.floor(c/d*4294967296),g[1]=0,k[0]=d/4294967296,k[255]=c/4294967296,l[0]=1,l[255]=Math.exp(-c);b>=1;b--)c=-Math.log(.003949659822581572/c+Math.exp(-c)),g[b+1]=Math.floor(c/j*4294967296),j=c,l[b]=Math.exp(-c),k[b]=c/4294967296}};for(let c of(k.hasInit=!1,$.randomGaussian=function(a,b){return k.hasInit||(k.zigset(),k.hasInit=!0),k.RNOR()*b+a},$.randomExponential=function(){return k.hasInit||(k.zigset(),k.hasInit=!0),k.REXP()},$.print=console.log,$.cursor=function(a,b,d){let c="";a.includes(".")&&(a=`url("${a}")`,c=", auto"),void 0!=b&&(a+=" "+b+" "+d),$.canvas.style.cursor=a+c},$.noCursor=function(){$.canvas.style.cursor="none"},$.createCapture=function(b){var a=document.createElement("video");return a.playsinline="playsinline",a.autoplay="autoplay",navigator.mediaDevices.getUserMedia(b).then(function(b){a.srcObject=b}),a.style.position="absolute",a.style.opacity=1e-5,a.style.zIndex=-1e3,document.body.appendChild(a),a},["setup","draw","preload","mouseMoved","mousePressed","mouseReleased","mouseDragged","mouseClicked","keyPressed","keyReleased","keyTyped","touchStarted","touchEnded",])){let d="_"+c+"Fn";$[d]=function(){},$[d].isPlaceHolder=!0,$[c]?$[d]=$[c]:Object.defineProperty($,c,{set:function(a){$[d]=a}})}function O(){$._noLoop||(m=null==$._frameRate?requestAnimationFrame(O):setTimeout(O,1e3/$._frameRate)),C(),n=!0,l.save(),$._drawFn(),l.restore(),$.frameCount++}function P(a){let b=$.canvas.getBoundingClientRect(),c=$.canvas.scrollWidth/$.width||1,d=$.canvas.scrollHeight/$.height||1;return{x:(a.clientX-b.left)/c,y:(a.clientY-b.top)/d,id:a.identifier}}function Q(){return $._touchStarted.isPlaceHolder&&$._touchMoved.isPlaceHolder&&$._touchEnded.isPlaceHolder}$.noLoop=function(){$._noLoop=!0,m=null},$.loop=function(){$._noLoop=!1,null==m&&O()},$.redraw=function(){O()},$.frameRate=function(a){$._frameRate=a},setTimeout(function(){function a(){if(q>0)return setTimeout(a,10);$._setupFn(),O()}$._preloadFn(),s=window.performance.now(),a()},1),$.canvas.onmousemove=function(a){$.pmouseX=$.mouseX,$.pmouseY=$.mouseY,$.mouseX=a.offsetX,$.mouseY=a.offsetY,$.mouseIsPressed?$._mouseDraggedFn(a):$._mouseMovedFn(a)},$.canvas.onmousedown=function(a){$.pmouseX=$.mouseX,$.pmouseY=$.mouseY,$.mouseX=a.offsetX,$.mouseY=a.offsetY,$.mouseIsPressed=!0,$.mouseButton=[$.LEFT,$.CENTER,$.RIGHT][a.button],$._mousePressedFn(a)},$.canvas.onmouseup=function(a){$.pmouseX=$.mouseX,$.pmouseY=$.mouseY,$.mouseX=a.offsetX,$.mouseY=a.offsetY,$.mouseIsPressed=!1,$._mouseReleasedFn(a)},$.canvas.onclick=function(a){$.pmouseX=$.mouseX,$.pmouseY=$.mouseY,$.mouseX=a.offsetX,$.mouseY=a.offsetY,$.mouseIsPressed=!0,$._mouseClickedFn(a),$.mouseIsPressed=!1},window.addEventListener("keydown",function(a){$.keyIsPressed=!0,$.key=a.key,$.keyCode=a.keyCode,r[$.keyCode]=!0,$._keyPressedFn(a),1==a.key.length&&$._keyTypedFn(a)}),window.addEventListener("keyup",function(a){$.keyIsPressed=!1,$.key=a.key,$.keyCode=a.keyCode,r[$.keyCode]=!1,$._keyReleasedFn(a)}),$.keyIsDown=function(a){return!!r[a]},$.canvas.ontouchstart=function(a){$.touches=a.touches.map(P),Q()&&($.pmouseX=$.mouseX,$.pmouseY=$.mouseY,$.mouseX=$.touches[0].x,$.mouseY=$.touches[0].y,$.mouseIsPressed=!0,$.mouseButton=$.LEFT,$._mousePressedFn(a)||a.preventDefault()),$._touchStartedFn(a)||a.preventDefault()},$.canvas.ontouchmove=function(a){$.touches=a.touches.map(P),Q()&&($.pmouseX=$.mouseX,$.pmouseY=$.mouseY,$.mouseX=$.touches[0].x,$.mouseY=$.touches[0].y,$.mouseIsPressed=!0,$.mouseButton=$.LEFT,$._mouseDraggedFn(a)||a.preventDefault()),$._touchMovedFn(a)||a.preventDefault()},$.canvas.ontouchend=$.canvas.ontouchcancel=function(a){$.touches=a.touches.map(P),Q()&&($.pmouseX=$.mouseX,$.pmouseY=$.mouseY,$.mouseX=$.touches[0].x,$.mouseY=$.touches[0].y,$.mouseIsPressed=!1,$._mouseReleasedFn(a)||a.preventDefault()),$._touchEndedFn(a)||a.preventDefault()},$.hasSensorPermission=!window.DeviceOrientationEvent&&!window.DeviceMotionEvent||!(DeviceOrientationEvent.requestPermission||DeviceMotionEvent.requestPermission),$.requestSensorPermissions=function(){DeviceOrientationEvent.requestPermission&&DeviceOrientationEvent.requestPermission().then(a=>{"granted"==a&&DeviceMotionEvent.requestPermission&&DeviceMotionEvent.requestPermission().then(a=>{"granted"==a&&($.hasSensorPermission=!0)}).catch(alert)}).catch(alert)};let R=a=>[1,0,0,0,0,Math.cos(a),-Math.sin(a),0,0,Math.sin(a),Math.cos(a),0,0,0,0,1],S=a=>[Math.cos(a),0,Math.sin(a),0,0,1,0,0,-Math.sin(a),0,Math.cos(a),0,0,0,0,1],T=(a,b)=>[a[0]*b[0]+a[1]*b[4]+a[2]*b[8]+a[3]*b[12],a[0]*b[1]+a[1]*b[5]+a[2]*b[9]+a[3]*b[13],a[0]*b[2]+a[1]*b[6]+a[2]*b[10]+a[3]*b[14],a[0]*b[3]+a[1]*b[7]+a[2]*b[11]+a[3]*b[15],a[4]*b[0]+a[5]*b[4]+a[6]*b[8]+a[7]*b[12],a[4]*b[1]+a[5]*b[5]+a[6]*b[9]+a[7]*b[13],a[4]*b[2]+a[5]*b[6]+a[6]*b[10]+a[7]*b[14],a[4]*b[3]+a[5]*b[7]+a[6]*b[11]+a[7]*b[15],a[8]*b[0]+a[9]*b[4]+a[10]*b[8]+a[11]*b[12],a[8]*b[1]+a[9]*b[5]+a[10]*b[9]+a[11]*b[13],a[8]*b[2]+a[9]*b[6]+a[10]*b[10]+a[11]*b[14],a[8]*b[3]+a[9]*b[7]+a[10]*b[11]+a[11]*b[15],a[12]*b[0]+a[13]*b[4]+a[14]*b[8]+a[15]*b[12],a[12]*b[1]+a[13]*b[5]+a[14]*b[9]+a[15]*b[13],a[12]*b[2]+a[13]*b[6]+a[14]*b[10]+a[15]*b[14],a[12]*b[3]+a[13]*b[7]+a[14]*b[11]+a[15]*b[15]],U=(a,b)=>[(a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3])/(a[12]*b[0]+a[13]*b[1]+a[14]*b[2]+a[15]),(a[4]*b[0]+a[5]*b[1]+a[6]*b[2]+a[7])/(a[12]*b[0]+a[13]*b[1]+a[14]*b[2]+a[15]),(a[8]*b[0]+a[9]*b[1]+a[10]*b[2]+a[11])/(a[12]*b[0]+a[13]*b[1]+a[14]*b[2]+a[15])];window.ondeviceorientation=function(a){$.pRotationX=$.rotationX,$.pRotationY=$.rotationY,$.pRotationZ=$.rotationZ,$.pRelRotationX=$.relRotationX,$.pRelRotationY=$.relRotationY,$.pRelRotationZ=$.relRotationZ,$.rotationX=a.beta*(Math.PI/180),$.rotationY=a.gamma*(Math.PI/180),$.rotationZ=a.alpha*(Math.PI/180),$.relRotationX=[-$.rotationY,-$.rotationX,$.rotationY][~~(window.orientation/90)+1],$.relRotationY=[-$.rotationX,$.rotationY,$.rotationX][~~(window.orientation/90)+1],$.relRotationZ=$.rotationZ},window.ondevicemotion=function(a){if($.pAccelerationX=$.accelerationX,$.pAccelerationY=$.accelerationY,$.pAccelerationZ=$.accelerationZ,!a.acceleration){let b=U(T(S($.rotationY),R($.rotationX)),[0,0,-9.80665]);$.accelerationX=a.accelerationIncludingGravity.x+b[0],$.accelerationY=a.accelerationIncludingGravity.y+b[1],$.accelerationZ=a.accelerationIncludingGravity.z-b[2]}},$.year=function(){return new Date().getFullYear()},$.day=function(){return new Date().getDay()},$.hour=function(){return new Date().getHours()},$.minute=function(){return new Date().getMinutes()},$.second=function(){return new Date().getSeconds()},$.millis=function(){return window.performance.now()-s}}}